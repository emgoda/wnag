const fs = require('fs');

const filePath = 'client/components/PropertyPanel.tsx';
let content = fs.readFileSync(filePath, 'utf8');

// Define the replacements for corrupted characters
const replacements = [
  // Page content/structure fixes
  ['更新页面���容', '更新页面内容'],
  ['元素复制���功', '元素复制成功'],
  ['复制元��失���', '复制元素失败'],
  ['向上移动元���', '向上移动元素'],
  ['���辑元素HTML', '编辑元素HTML'],
  ['HTML���辑成功', 'HTML编辑成功'],
  ['HTML编��失败���请检查格式是否正��', 'HTML编辑失败，请检查格式是否正确'],
  ['选择父��������', '选择父元素'],
  ['清除当前选���状态', '清除当前选中状态'],
  ['通过触发一���特殊的更���来选���父元素', '通过触发一个特殊的更新来选择父元素'],
  ['删除���素', '删除元素'],
  ['����新父组件内容', '更新父组件内容'],
  ['���发父组���的内容更���', '触发父组件的内容更新'],
  ['处理���板生成', '处理模板生成'],
  
  // Template content fixes
  ['发现���限可能，创造美好未���', '发现无限可能，创造美好未来'],
  ['专业的服务，���越���������验', '专业的服务，卓越的用户体验'],
  ['������部署', '快速部署'],
  ['一�����署，快��上线', '一键部署，快速上线'],
  ['企业级安全保�����，全方位保�����的���������������', '企业级安全保障，全方位保护您的数据安全'],
  ['��性能', '高性能'],
  ['提供�����的用户体验', '提供极致的用户体验'],
  ['���成���系表单模板', '生成联系表单模板'],
  ['�����我们', '联系我们'],
  ['有任何问题����们很乐意为您解答', '有任何问题，我们很乐意为您解答'],
  ['�����������箱', '电子邮箱'],
  ['发送���言', '发送留言'],
  ['生成价格表���板', '生成价格表模板'],
  ['选择适��的方������', '选择适合的方案'],
  ['����础版', '基础版'],
  ['����199', '¥199'],
  ['��� 高级分析', '✓ 高级分析'],
  ['所有专业功���', '所有专业功能'],
  ['无限存储空���', '无限存储空间'],
  ['��� 24/7 专属支持', '✓ 24/7 专属支持'],
  ['定制�����成', '定制集成'],
  ['选择企业�����', '选择企业版'],
  ['生成���户评价��板', '生成客户评价模板'],
  ['���听客户怎么说', '来听客户怎么说'],
  ['���⭐⭐⭐⭐', '⭐⭐⭐⭐⭐'],
  ['"��队协作���率大�����升，数据分析功能特别实�������强烈推荐给其他企业！"', '"团队协作效率大幅提升，数据分析功能特别实用，强烈推荐给其他企业！"'],
  ['运营总���', '运营总监'],
  ['���⭐⭐⭐⭐', '⭐⭐⭐⭐⭐'],
  ['"部署��单，使���方便���性价比很高。技术支持团队专业且耐心，解�����题很���时。"', '"部署简单，使用方便，性价比很高。技术支持团队专业且耐心，解决问题很及时。"'],
  ['���先生', '陈先生'],
  ['技���总监', '技术总监'],
  
  // DOM tree and UI fixes
  ['自动展开��指定元素并滚动到该���置', '自动展开到指定元素并滚动到该位置'],
  ['找到元素路径，自���展开', '找到元素路径，自动展开'],
  ['延时滚动���目��元素，确保DOM已更新', '延时滚动到目标元素，确保DOM已更新'],
  ['尝试通��元素���容查找对应的DOM树�����', '尝试通过元素内容查找对应的DOM树节点'],
  ['���新DOM树', '更新DOM树'],
  ['恢复����title', '恢复原title'],
  ['�������恢复交互能力', '强制恢复交互能力'],
  ['选择DOM节点 - 纯���览模式，不锁定交互', '选择DOM节点 - 纯预览模式，不锁定交互'],
  ['添�����停效果', '添加悬停效果'],
  ['检测元素是否隐藏���不可见', '检测元素是否隐藏或不可见'],
  ['首先检查iframe中的元素（因为DOM树���的元素��������来自iframe）', '首先检查iframe中的元素（因为DOM树中的元素通常来自iframe）'],
  ['���查尺寸是否为0（����除某些正常的0尺寸元素）', '检查尺寸是否为0（排除某些正常的0尺寸元素）'],
  ['不可操���元素（系���/框架元素）', '不可操作元素（系统/框架元素）'],
  ['可����作元素', '可操作元素'],
  ['���� 已锁定选择', '🔒 已锁定选择'],
  ['不可���作元素', '不可操作元素'],
  ['�����元素类型信���', '显示元素类型信息'],
  ['点击预览中的元素或下方DOM�����进行编辑', '点击预览中的元素或下方DOM树进行编辑'],
  ['����HTML', '编辑HTML'],
  ['���择父元素', '选择父元素'],
  ['删除元���', '删除元素'],
  ['����������域', '主编辑区域'],
  ['字�����细', '字体粗细'],
  ['内�������', '内边距'],
  ['标题���数据ID', '标题和数据ID'],
  ['�����格式', '输入格式'],
  ['���箱', '邮箱'],
  ['显示所有元��（包括不可操作的）', '显示所有元素（包括不可操作的）'],
  ['只显��可操作元���', '只显示可操作元素'],
  ['展开所有DOM节���', '展开所有DOM节点'],
  ['跳转到选中元���', '跳转到选中元素'],
  ['跳转到���前选中的元素', '跳转到当前选中的���素'],
  ['正在加载DOM结构... 点击"刷新"重���', '正在加载DOM结构... 点击"刷新"重试'],
  ['��加载', '已加载'],
  ['个������点', '个根节点'],
  ['✅ 已过滤不���操作元素', '✅ 已过滤不可操作元素'],
  ['强�����������DOM树', '强制重新构建DOM树']
];

// Apply all replacements
replacements.forEach(([search, replace]) => {
  content = content.replace(new RegExp(search.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'), replace);
});

// Write the fixed content back to the file
fs.writeFileSync(filePath, content, 'utf8');

console.log('Encoding fixes applied to PropertyPanel.tsx');
