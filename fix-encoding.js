const fs = require('fs');

// 读取文件内容
let content = fs.readFileSync('client/components/PropertyPanel.tsx', 'utf8');

// 常见的乱码替换
const fixes = [
  // 基本汉字替换
  [/���/g, '新'],
  [/���/g, '编'],
  [/���/g, '辑'],
  [/���/g, '修'],
  [/���/g, '改'],
  [/���/g, '更'],
  [/���/g, '新'],
  [/���/g, '建'],
  [/���/g, '选'],
  [/���/g, '择'],
  [/���/g, '删'],
  [/���/g, '除'],
  [/���/g, '复'],
  [/���/g, '制'],
  [/���/g, '移'],
  [/���/g, '动'],
  [/���/g, '元'],
  [/���/g, '素'],
  [/���/g, '内'],
  [/���/g, '容'],
  [/���/g, '显'],
  [/���/g, '示'],
  [/���/g, '设'],
  [/���/g, '���'],
  [/���/g, '功'],
  [/���/g, '能'],
  [/���/g, '基'],
  [/���/g, '础'],
  [/���/g, '专'],
  [/���/g, '业'],
  [/���/g, '企'],
  [/���/g, '系'],
  [/���/g, '统'],
  [/���/g, '安'],
  [/���/g, '全'],
  [/���/g, '可'],
  [/���/g, '靠'],
  [/���/g, '高'],
  [/���/g, '性'],
  [/���/g, '优'],
  [/���/g, '化'],
  [/���/g, '联'],
  [/���/g, '价'],
  [/���/g, '格'],
  [/���/g, '方'],
  [/���/g, '案'],
  [/���/g, '客'],
  [/���/g, '户'],
  [/���/g, '评'],
  [/���/g, '价'],
  [/���/g, '团'],
  [/���/g, '队'],
  [/���/g, '协'],
  [/���/g, '作'],
  [/���/g, '效'],
  [/���/g, '率'],
  [/���/g, '大'],
  [/���/g, '幅'],
  [/���/g, '提'],
  [/���/g, '升'],
  [/���/g, '实'],
  [/���/g, '用'],
  [/���/g, '强'],
  [/���/g, '烈'],
  [/���/g, '推'],
  [/���/g, '荐'],
  [/���/g, '部'],
  [/���/g, '署'],
  [/���/g, '简'],
  [/���/g, '单'],
  [/���/g, '使'],
  [/���/g, '便'],
  [/���/g, '及'],
  [/���/g, '时'],
  [/���/g, '找'],
  [/���/g, '到'],
  [/���/g, '自'],
  [/���/g, '动'],
  [/���/g, '展'],
  [/���/g, '开'],
  [/���/g, '路'],
  [/���/g, '径'],
  [/���/g, '清'],
  [/���/g, '除'],
  [/���/g, '状'],
  [/���/g, '态'],
  [/���/g, '立'],
  [/���/g, '即'],
  [/���/g, '保'],
  [/���/g, '存'],
  [/���/g, '强'],
  [/���/g, '制'],
  [/���/g, '恢'],
  [/���/g, '复'],
  [/���/g, '交'],
  [/���/g, '互'],
  [/���/g, '停'],
  [/���/g, '悬'],
  [/���/g, '浮'],
  [/���/g, '效'],
  [/���/g, '果'],
  [/���/g, '检'],
  [/���/g, '查'],
  [/���/g, '尺'],
  [/���/g, '寸'],
  [/���/g, '排'],
  [/���/g, '除'],
  [/���/g, '某'],
  [/���/g, '些'],
  [/���/g, '正'],
  [/���/g, '常'],
  [/���/g, '操'],
  [/���/g, '作'],
  [/���/g, '框'],
  [/���/g, '架'],
  [/���/g, '隐'],
  [/���/g, '藏'],
  [/���/g, '锁'],
  [/���/g, '定'],
  [/���/g, '当'],
  [/���/g, '前'],
  [/���/g, '选'],
  [/���/g, '中'],
  [/���/g, '点'],
  [/���/g, '击'],
  [/���/g, '右'],
  [/���/g, '键'],
  [/���/g, '信'],
  [/���/g, '息'],
  [/���/g, '类'],
  [/���/g, '型'],
  [/���/g, '标'],
  [/���/g, '题'],
  [/���/g, '数'],
  [/���/g, '据'],
  [/���/g, '预'],
  [/���/g, '览'],
  [/���/g, '进'],
  [/���/g, '行'],
  [/���/g, '文'],
  [/���/g, '字'],
  [/���/g, '样'],
  [/���/g, '式'],
  [/���/g, '父'],
  [/���/g, '窗'],
  [/���/g, '口'],
  [/���/g, '认'],
  [/���/g, '默'],
  [/���/g, '模'],
  [/���/g, '板'],
  [/���/g, '阴'],
  [/���/g, '影'],
  [/���/g, '输'],
  [/���/g, '入'],
  [/���/g, '按'],
  [/���/g, '钮'],
  [/���/g, '半'],
  [/���/g, '透'],
  [/���/g, '明'],
  [/���/g, '结'],
  [/���/g, '构'],
  [/���/g, '重'],
  [/���/g, '试'],
  [/���/g, '根'],
  [/���/g, '节'],
  [/���/g, '过'],
  [/���/g, '滤'],
  [/���/g, '包'],
  [/���/g, '括'],
  [/���/g, '所'],
  [/���/g, '有']
];

console.log('开始修复乱码...');
let fixCount = 0;

fixes.forEach(([pattern, replacement]) => {
  const matches = content.match(pattern);
  if (matches) {
    content = content.replace(pattern, replacement);
    fixCount += matches.length;
  }
});

console.log(`修复了 ${fixCount} 个乱码字符`);

// 写回文件
fs.writeFileSync('client/components/PropertyPanel.tsx', content, 'utf8');
console.log('乱码修复完成！');
